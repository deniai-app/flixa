@import "tailwindcss";

@theme {
  --color-foreground: var(--vscode-foreground);
  --color-foreground-muted: var(--vscode-descriptionForeground);
  --color-foreground-subtle: var(--vscode-disabledForeground);
  --color-background: var(--vscode-background);
  --color-accent: var(--vscode-button-background);
  --color-accent-hover: var(--vscode-button-hoverBackground);
  --color-accent-foreground: var(--vscode-button-foreground);
  --color-accent-glow: color-mix(in srgb, var(--vscode-button-background) 40%, transparent);
  --color-surface-1: var(--vscode-background);
  --color-surface-2: var(--vscode-editorWidget-background);
  --color-surface-3: var(--vscode-sideBar-background);
  --color-surface-hover: var(--vscode-list-hoverBackground);
  --color-border-subtle: var(--vscode-editorWidget-border);
  --color-border-accent: var(--vscode-button-background);
  --color-input-bg: var(--vscode-input-background);
  --color-input-foreground: var(--vscode-input-foreground);
  --color-input-border: var(--vscode-input-border);
  --color-input-placeholder: var(--vscode-input-placeholderForeground);
  --color-menu-bg: var(--vscode-menu-background);
  --color-menu-foreground: var(--vscode-menu-foreground);
  --color-menu-selected-bg: var(--vscode-menu-selectionBackground);
  --color-menu-selected-foreground: var(--vscode-menu-selectionForeground);
  --color-menu-border: var(--vscode-editorWidget-border);
  --color-menu-separator: var(--vscode-menu-separatorBackground);
  --color-info: var(--vscode-editorInfo-foreground);
  --color-warning: var(--vscode-editorWarning-foreground);
  --color-error: var(--vscode-editorError-foreground);
  --color-success: var(--vscode-testing-iconPassed, var(--vscode-editorInfo-foreground));
  --color-info-bg: var(--vscode-inputValidation-infoBackground);
  --color-info-border: var(--vscode-inputValidation-infoBorder);
  --color-warning-bg: var(--vscode-inputValidation-warningBackground);
  --color-warning-border: var(--vscode-inputValidation-warningBorder);
  --color-error-bg: var(--vscode-inputValidation-errorBackground);
  --color-error-border: var(--vscode-inputValidation-errorBorder);
  --color-success-bg: var(--vscode-inputValidation-infoBackground);
  --color-success-border: var(--vscode-inputValidation-infoBorder);
  --color-code-bg: var(--vscode-textCodeBlock-background);
  --color-shadow: var(--vscode-widget-shadow);
}

@keyframes messageIn {
  from { opacity: 0; transform: translateY(8px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes pulse-dot {
  0%, 80%, 100% { transform: scale(0.6); opacity: 0.4; }
  40% { transform: scale(1); opacity: 1; }
}

.message-animate {
  animation: messageIn 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.loading-dot {
  animation: pulse-dot 1.4s infinite ease-in-out;
}

.loading-dot:nth-child(1) { animation-delay: -0.32s; }
.loading-dot:nth-child(2) { animation-delay: -0.16s; }
.loading-dot:nth-child(3) { animation-delay: 0s; }

body {
  margin: 0;
  background-color: var(--vscode-sideBar-background);
  color: var(--vscode-foreground);
  font-family: var(--vscode-font-family);
  font-size: var(--vscode-font-size);
}

#root {
  height: 100vh;
  display: flex;
  flex-direction: column;
}

::-webkit-scrollbar { width: 6px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: var(--vscode-scrollbarSlider-background); border-radius: 3px; }
::-webkit-scrollbar-thumb:hover { background: var(--vscode-scrollbarSlider-hoverBackground); }

/* Markdown content styles */
.markdown-content {
  line-height: 1.6;
}

.markdown-content p {
  margin: 0 0 0.75em 0;
}

.markdown-content p:last-child {
  margin-bottom: 0;
}

.markdown-content h1,
.markdown-content h2,
.markdown-content h3,
.markdown-content h4,
.markdown-content h5,
.markdown-content h6 {
  margin: 1em 0 0.5em 0;
  font-weight: 600;
  line-height: 1.3;
}

.markdown-content h1:first-child,
.markdown-content h2:first-child,
.markdown-content h3:first-child,
.markdown-content h4:first-child,
.markdown-content h5:first-child,
.markdown-content h6:first-child {
  margin-top: 0;
}

.markdown-content h1 { font-size: 1.5em; }
.markdown-content h2 { font-size: 1.3em; }
.markdown-content h3 { font-size: 1.15em; }
.markdown-content h4 { font-size: 1em; }

.markdown-content ul,
.markdown-content ol {
  margin: 0.5em 0;
  padding-left: 1.5em;
}

.markdown-content li {
  margin: 0.25em 0;
}

.markdown-content blockquote {
  margin: 0.75em 0;
  padding: 0.5em 1em;
  border-left: 3px solid var(--color-accent);
  background: var(--color-surface-hover);
  border-radius: 0 4px 4px 0;
}

.markdown-content blockquote p {
  margin: 0;
}

.markdown-content hr {
  margin: 1em 0;
  border: none;
  border-top: 1px solid var(--color-border-subtle);
}

.markdown-content a {
  color: var(--color-accent);
  text-decoration: none;
}

.markdown-content a:hover {
  text-decoration: underline;
}

.markdown-content strong {
  font-weight: 600;
}

.markdown-content table {
  width: 100%;
  border-collapse: collapse;
  margin: 0.75em 0;
  font-size: 0.9em;
}

.markdown-content th,
.markdown-content td {
  padding: 0.5em 0.75em;
  border: 1px solid var(--color-border-subtle);
  text-align: left;
}

.markdown-content th {
  background: var(--color-surface-hover);
  font-weight: 600;
}

/* Inline code */
.inline-code {
  background: var(--color-code-bg);
  padding: 0.15em 0.4em;
  border-radius: 4px;
  font-family: var(--vscode-editor-font-family, monospace);
  font-size: 0.9em;
}

/* Code block wrapper */
.code-block-wrapper {
  margin: 0.75em 0;
  border-radius: 6px;
  overflow: hidden;
}

.code-block-wrapper:first-child {
  margin-top: 0;
}

.code-block-wrapper:last-child {
  margin-bottom: 0;
}

/* Shiki code blocks */
.code-block-wrapper pre,
.shiki-fallback {
  margin: 0;
  padding: 0.75em 1em;
  overflow-x: auto;
  font-family: var(--vscode-editor-font-family, monospace);
  font-size: 0.85em;
  line-height: 1.5;
  border-radius: 6px;
}

.shiki-fallback {
  background: var(--color-code-bg);
}

.shiki-fallback code {
  background: none;
  padding: 0;
}

/* Shiki theme support */
.code-block-wrapper .shiki {
  background-color: var(--color-code-bg) !important;
}

.code-block-wrapper .shiki code {
  background: none;
  padding: 0;
}

/* Light/dark theme support for shiki dual themes */
@media (prefers-color-scheme: light) {
  .code-block-wrapper .shiki,
  .code-block-wrapper .shiki span {
    color: var(--shiki-light) !important;
    background-color: var(--shiki-light-bg) !important;
  }
}

@media (prefers-color-scheme: dark) {
  .code-block-wrapper .shiki,
  .code-block-wrapper .shiki span {
    color: var(--shiki-dark) !important;
    background-color: var(--shiki-dark-bg) !important;
  }
}

/* VS Code uses custom CSS variables for themes, detect via background */
html[style*="--vscode-editor-background: #1e1e1e"],
html[style*="--vscode-editor-background: #252526"],
html[style*="--vscode-editor-background: #011627"],
html[style*="--vscode-editor-background: #282c34"],
html[style*="--vscode-editor-background: #24292e"],
html[style*="--vscode-editor-background: #1f1f1f"],
html[style*="--vscode-editor-background: #0d1117"],
html[style*="--vscode-editor-background: #272822"] {
  .code-block-wrapper .shiki,
  .code-block-wrapper .shiki span {
    color: var(--shiki-dark) !important;
    background-color: var(--shiki-dark-bg) !important;
  }
}
